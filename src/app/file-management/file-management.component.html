<div class="upload-container">
  <h2>Upload Files</h2>

  <div class="file-input-group">
    <label for="fileInput">Select Files</label>
    <input type="file" id="fileInput" (change)="onFileChange($event)" multiple>
  </div>

  <button
    class="upload-button"
    [disabled]="!selectedFiles || selectedFiles.length === 0 || loading"
    (click)="uploadFiles()"
  >
    Upload
  </button>

  <button
    class="prepare-button secondary"
    [disabled]="loading"
    (click)="prepareFiles()"
  >
    Prepare
  </button>

  <div *ngIf="uploadMessage" class="message" [ngClass]="{'error-message': hasFailures(), 'success-message': !hasFailures() && uploadMessage.includes('Uploaded:') && !uploadMessage.includes('Failed: 0')}">{{ uploadMessage }}</div>
  <div *ngIf="prepareMessage" class="message" [ngClass]="{'error-message': prepareMessage.includes('failed'), 'success-message': prepareMessage.includes('success')}">{{ prepareMessage }}</div>

  <ul *ngIf="uploadedFiles.length > 0" class="uploaded-files-list">
    <li *ngFor="let file of uploadedFiles">{{ file.name }}</li>
  </ul>
</div>

<div *ngIf="loading" class="loading-overlay">
  <span>Loading...</span>
</div>
